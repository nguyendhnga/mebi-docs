<!DOCTYPE html>
<html lang="vi" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mebi Docs Hub</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  <style>
    :root {
      --primary: #1db954;
      --background-color: #191c1f;
      --container-background: #23272c;
      --border-radius: 12px;
    }
    body { background: var(--background-color); }
    main.container { padding: 2.5rem 0 2rem 0; }
    section.docs-list {
      margin-top: 1.5rem;
      background: var(--container-background);
      border-radius: var(--border-radius);
      padding: 2rem 1.5rem;
    }
    .phase-group { margin-bottom: 2rem; }
    .phase-title { color: var(--primary); margin-bottom: .7rem; }
    .docs-card {
      background: #212529;
      border-radius: var(--border-radius);
      padding: 1rem 1.2rem;
      margin-bottom: 1rem;
      display: flex; gap: 1.2rem; align-items: center;
      border: 1px solid #22282f;
    }
    .docs-card img {
      width: 56px; height: 56px;
      object-fit: cover;
      border-radius: 10px;
      background: #181b1e;
    }
    .docs-meta { flex: 1; overflow: hidden; }
    .docs-meta h4 { margin: 0 0 4px 0; color: #fff; font-size: 1.07em; line-height: 1.2; }
    .docs-meta p { margin: 0 0 6px 0; font-size: 0.97em; color: #cccccc; }
    .docs-meta .badge {
      font-size: 0.81em; color: #fff; background: var(--primary);
      border-radius: 4px; padding: 0.15em 0.65em;
      margin-right: .3em; display: inline-block;
    }
    .docs-link { color: var(--primary); font-size: 1.2em; }
    @media (max-width: 600px) {
      .docs-card { flex-direction: column; align-items: flex-start; gap: .7rem; }
      .docs-card img { width: 44px; height: 44px; }
    }
    .search-bar { margin-bottom: 2rem; }
    main.container p {
      margin-bottom: 0.8em;
      margin-top: 0;
    }
  </style>
</head>
<body>
  <nav class="container-fluid">
    <ul>
      <li><strong>Mebi Docs Hub</strong></li>
    </ul>
    <ul>
      <li><a href="#">Trang ch·ªß</a></li>
      <li><a href="#docs">T√†i li·ªáu</a></li>
    </ul>
  </nav>

  <!-- PASSWORD FORM -->
  <div id="unlock-box">
    <h2>üîí Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ truy c·∫≠p t√†i li·ªáu</h2>
    <form id="unlock-form">
      <input type="password" id="unlock-password" placeholder="M·∫≠t kh·∫©u n·ªôi b·ªô..." autocomplete="off" required>
      <button type="submit">M·ªü kho√°</button>
    </form>
    <div class="unlock-err" id="unlock-err"></div>
    <p style="margin-top:1.2em;color:#aaa; font-size:.94em;">
      <i>Li√™n h·ªá tr∆∞·ªüng d·ª± √°n ƒë·ªÉ l·∫•y m·∫≠t kh·∫©u n·ªôi b·ªô.</i>
    </p>
  </div>

  <main class="container locked" id="main-content">
    <div class="grid">
      <section>
        <hgroup>
          <h2>Kho t√†i li·ªáu d·ª± √°n Mebi</h2>
          <h3>N∆°i l∆∞u tr·ªØ c√°c docs c·∫ßn thi·∫øt ‚Äì ph√¢n lo·∫°i theo giai ƒëo·∫°n d·ª± √°n</h3>
        </hgroup>
        <p>ƒê√¢y l√† h·ªá th·ªëng l∆∞u tr·ªØ n·ªôi b·ªô c√°c t√†i li·ªáu quan tr·ªçng ph·ª•c v·ª• cho c√°c giai ƒëo·∫°n c·ªßa d·ª± √°n Mebi.</p>
        <p>B·∫°n c√≥ th·ªÉ t√¨m ki·∫øm, ph√¢n lo·∫°i, v√† theo d√µi c√°c t√†i li·ªáu li√™n quan.</p>
        <figure>
          <img src="logo-mebi.png" alt="logo" class="playlist-thumb" style="max-width:160px; margin:auto;">
          <figcaption>
            <a href="#" target="_blank">Mebi - H√†nh tr√¨nh ghi nh·∫≠n ƒëam m√™</a>
          </figcaption>
        </figure>
        <h3 id="docs">T√¨m ki·∫øm & Danh s√°ch t√†i li·ªáu</h3>
        <div class="search-bar">
          <input type="search" id="searchInput" placeholder="T√¨m ki·∫øm t√†i li·ªáu, giai ƒëo·∫°n, m·ª•c nh·ªè..." aria-label="T√¨m ki·∫øm">
        </div>
        <section class="docs-list" id="docsList"></section>
      </section>
    </div>
  </main>

  <section aria-label="Subscribe example">
    <div class="container">
      <article>
        <hgroup>
          <h2>ƒêƒÉng k√Ω nh·∫≠n th√¥ng b√°o n·ªôi b·ªô</h2>
          <h3>Nh·∫≠p t√™n v√† email ƒë·ªÉ nh·∫≠n c·∫≠p nh·∫≠t docs m·ªõi</h3>
        </hgroup>
        <form class="grid" onsubmit="event.preventDefault()">
          <input type="text" id="firstname" name="firstname" placeholder="T√™n c·ªßa b·∫°n" aria-label="T√™n c·ªßa b·∫°n" required />
          <input type="email" id="email" name="email" placeholder="Email c√¥ng ty" aria-label="Email c√¥ng ty" required />
          <button type="submit">ƒêƒÉng k√Ω</button>
        </form>
      </article>
    </div>
  </section>

  <footer class="container">
    <small>
      <a href="#">Mebi Project</a> ‚Ä¢ <a href="#">Ch·ªâ s·ª≠ d·ª•ng n·ªôi b·ªô</a>
    </small>
  </footer>

  <script>
    // Password Gate
    const CORRECT_PASS = "mebi2024"; // ƒê·ªïi m·∫≠t kh·∫©u ·ªü ƒë√¢y!
    document.getElementById('unlock-form').onsubmit = function(e) {
      e.preventDefault();
      const pass = document.getElementById('unlock-password').value;
      if (pass === CORRECT_PASS) {
        document.getElementById('unlock-box').style.display = "none";
        document.getElementById('main-content').classList.remove('locked');
      } else {
        document.getElementById('unlock-err').textContent = "Sai m·∫≠t kh·∫©u. Vui l√≤ng th·ª≠ l·∫°i!";
        setTimeout(() => { document.getElementById('unlock-err').textContent = ""; }, 2500);
      }
    };

    // ==== ƒê·ªíNG B·ªò T·ª™ GOOGLE SHEET ====
    // Thay link b√™n d∆∞·ªõi b·∫±ng link opensheet.vercel.app c·ªßa Google Sheet b·∫°n!
    // V√≠ d·ª•: const SHEET_URL = "https://opensheet.vercel.app/1abcXYZ12345abcdEfgh-YourID/Sheet1";
    const SHEET_URL = "https://opensheet.vercel.app/1zyWWUm7yJS5yD2TwLhezVwnqBtF7Ka-TVraZWuyVJb4/Sheet1";

    let allDocs = [];
    const phases = [
      { name: "MVP", sections: [] },
      { name: "Ch√≠nh th·ª©c - Giai ƒëo·∫°n 1", sections: [] },
      { name: "Ch√≠nh th·ª©c - Giai ƒëo·∫°n 2", sections: [] },
      { name: "Ch√≠nh th·ª©c - Giai ƒëo·∫°n 3", sections: [] }
    ];

    async function fetchDocs() {
      try {
        const res = await fetch(SHEET_URL);
        const data = await res.json();
        allDocs = data;
        renderDocs();
      } catch (e) {
        document.getElementById('docsList').innerHTML = "<p style='color:#fa3d63'>Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu t·ª´ Google Sheet.<br>Ki·ªÉm tra l·∫°i link ho·∫∑c quy·ªÅn chia s·∫ª!</p>";
      }
    }

    function renderDocs(filter="") {
      let html = "";
      // Reset sections
      phases.forEach(p => p.sections = []);
      // Ph√¢n lo·∫°i theo phase
      allDocs.forEach(doc => {
        if (!doc.phase || !doc.title) return;
        // filter logic
        const str = `${doc.phase} ${doc.section} ${doc.title} ${doc.desc}`.toLowerCase();
        if (filter && !str.includes(filter.toLowerCase())) return;
        let phase = phases.find(p => p.name === doc.phase);
        if (phase) phase.sections.push(doc);
      });
      phases.forEach(phase => {
        if (!phase.sections.length) return;
        html += `<div class="phase-group"><div class="phase-title"><strong>${phase.name}</strong></div>`;
        phase.sections.forEach(doc => {
          html += `
            <div class="docs-card">
              <img src="${doc.img || 'https://placehold.co/56x56/23272c/1db954?text=Doc'}" alt="Docs">
              <div class="docs-meta">
                <h4>${doc.title} <span class="badge">${doc.section}</span></h4>
                <p>${(doc.desc || '').replace(/\n/g, '<br>')}</p>
                <a class="docs-link" href="${doc.link}" target="_blank" rel="noopener">üîó Xem t√†i li·ªáu</a>
              </div>
            </div>
          `;
        });
        html += "</div>";
      });
      if (!html) html = '<p style="color:#888">Ch∆∞a c√≥ t√†i li·ªáu n√†o, ho·∫∑c kh√¥ng c√≥ t√†i li·ªáu ph√π h·ª£p v·ªõi t·ª´ kho√° t√¨m ki·∫øm.</p>';
      document.getElementById('docsList').innerHTML = html;
    }

    // Search
    document.getElementById('searchInput').oninput = function() {
      renderDocs(this.value);
    };

    // L·∫•y d·ªØ li·ªáu l·∫ßn ƒë·∫ßu
    fetchDocs();

    // === GHI CH√ö QUAN TR·ªåNG ===
    // 1. B·∫°n th√™m/xo√°/s·ª≠a docs ·ªü file Google Sheet (ch·ªâ m√¨nh b·∫°n quy·ªÅn edit).
    // 2. C√°c th√†nh vi√™n ch·ªâ m·ªü web n√†y l√† t·ª± th·∫•y d·ªØ li·ªáu m·ªõi nh·∫•t.
    // 3. N·∫øu docs kh√¥ng hi·ªán ra, h√£y ki·ªÉm tra: Sheet ƒë√£ chia s·∫ª Anyone can view? ƒê√∫ng t√™n Sheet? ƒê√∫ng link opensheet ch∆∞a?
    // 4. Sheet ph·∫£i c√≥ c√°c c·ªôt ƒë√∫ng t√™n: phase, section, title, desc, link, img.
  </script>
</body>
</html>
